<?xml version='1.0' standalone='yes'?>
<!DOCTYPE PLUGIN [
    <!ENTITY name      "unraid-security">
    <!ENTITY author    "Sean Knight">
    <!ENTITY version   "2025.06.25">
    <!ENTITY launch    "Settings/Security.Main">
    <!ENTITY plugdir   "/usr/local/emhttp/plugins/&name;">
    <!ENTITY github    "SirSmirksALot/unraid-security">
    <!ENTITY rawbase   "https://raw.githubusercontent.com/&github;/master">
    <!ENTITY pluginURL "&rawbase;/&name;.plg">
]>

<PLUGIN name="&name;" author="&author;" version="&version;" launch="&launch;" pluginURL="&pluginURL;" icon="shield"
        min="6.12" support="https://github.com/&github;/issues">

    <CHANGES>
        <![CDATA[
        ðŸš€ 2025.06.25 â€” Initial version
        - Uses raw GitHub files (no .tgz)
        - Based on working Unraid 7.x plugin style
        ]]>
    </CHANGES>

    <FILE Run="/bin/bash">
        <INLINE>
            echo "Cleaning old plugin files..."
            rm -rf &plugdir;
            mkdir -p &plugdir;
        </INLINE>
    </FILE>

    <FILE Name="&plugdir;/checkSecurity.php">
        <URL>&rawbase;/checkSecurity.php</URL>
    </FILE>

    <FILE Run="/bin/bash">
        <INLINE>
            echo "Plugin &name; installed to &plugdir;"
        </INLINE>
    </FILE>

    <FILE Run="/bin/bash" Method="remove">
        <INLINE>
            echo "Uninstalling &name;..."
            rm -rf &plugdir;
            echo "Done."
        </INLINE>
    </FILE>
</PLUGIN>
